window.addEventListener("DOMContentLoaded", () => {
  var e = document.querySelector(".hero-slider");
  new Flickity(e, {
    cellAlign: "right",
    autoPlay: 4e3,
    wrapAround: !0,
    friction: 0.5,
    pageDots: !1,
  });
  AOS.init();
  !(function () {
    const e = document.querySelectorAll(".product-nav-tab"),
      t = document.querySelectorAll(".product-tabs-item");
    function o() {
      e.forEach((e) => {
        e.classList.remove("active");
      }),
        this.classList.add("active"),
        (tabNavIndex = this.dataset.tab),
        (function (e) {
          t.forEach((t) => {
            t.dataset.index == e
              ? t.classList.add("active")
              : t.classList.remove("active");
          });
        })(tabNavIndex);
    }
    e.forEach((e) => {
      e.addEventListener("click", o);
    });
  })(),
    $(".body").parallaxie({
      speed: -0.4,
      offset: 70,
      size: "cover",
      repeat: "repeat",
    }),
    $(".promo__wrap").parallaxie({ size: "contain" });
  let t = document.querySelector(".header__nav-btn"),
    o = document.querySelector(".header-mobile-menu"),
    i = document.querySelectorAll(".header-mobile-menu__link");
  t.addEventListener("click", () => {
    o.classList.toggle("active"),
      t.classList.toggle("active"),
      i.forEach((e) => {
        e.addEventListener("click", () => {
          t.classList.remove("active"),
            o.classList.remove("active"),
            (document.body.style.overflow = "visible");
        });
      }),
      o.classList.contains("active")
        ? (document.body.style.overflow = "hidden")
        : (document.body.style.overflow = "visible");
  });
  let n = $(".header-grid"),
    a = $(".hero"),
    r = (a.innerHeight(), $(window).scrollTop());
  function c(e, t = null) {
    const o = (e) => Math.floor(e.getBoundingClientRect().top);
    e.preventDefault();
    var i = t ? t.getAttribute("href") : this.getAttribute("href");
    const n = document.querySelector(i);
    if (!n) return;
    const a = o(n);
    window.scrollBy({ top: a - 30, left: 0, behavior: "smooth" });
    const r = setInterval(function () {
      const e =
        window.innerHeight + window.pageYOffset >=
        document.body.offsetHeight - 2;
      (0 === o(n) || e) &&
        ((n.tabIndex = "-1"),
        n.focus(),
        window.history.pushState("", "", i),
        clearInterval(r));
    }, 100);
  }
  $(window).on("scroll load resize", function () {
    let e = a.innerHeight();
    (r = $(this).scrollTop()),
      r > e ? n.addClass("fixed") : n.removeClass("fixed");
  }),
    document
      .querySelectorAll(".header-menu__link")
      .forEach((e) => (e.onclick = c));
});
